function login(){var a=$("#LoginInputUser").val(),b=$("#LoginInputPassword").val();restClient.update("/api/V1/login",{username:a,password:b}).done(function(a){console.log("REST call succeeded",a),token=a.token,localStorage.setItem("token",token),window.location="index.php"}).fail(function(){console.log("fail")})}function toggleChapters(){$("#chapters-all").hasClass("chaptersVisible")?hideChapters():(hideChapters(),$("#chapters-all").addClass("chaptersVisible"),$(".chapterIcon").addClass("chapterIconActive"))}function toggleCompetences(){$("#competences").hasClass("chaptersVisible")?hideChapters():(hideChapters(),$("#competences").addClass("chaptersVisible"),$(".competenceIcon").addClass("competenceIconActive"))}function toggleEduplan(){$("#eduplan").hasClass("chaptersVisible")?hideChapters():(hideChapters(),$("#eduplan").addClass("chaptersVisible"),$(".eduIcon").addClass("eduIconActive"))}function toggleStudent(){$("#student").hasClass("chaptersVisible")?hideChapters():(hideChapters(),$("#student").addClass("chaptersVisible"))}function toggleSchool(){$("#school").hasClass("chaptersVisible")?hideChapters():(hideChapters(),$("#school").addClass("chaptersVisible"))}function toggleKlasse(){$("#klasse").hasClass("chaptersVisible")?hideChapters():(hideChapters(),$("#klasse").addClass("chaptersVisible"))}function toggleHelp(){$("#help").hasClass("chaptersVisible")?hideChapters():(hideChapters(),$("#help").addClass("chaptersVisible"),$(".helpIcon").addClass("helpIconActive"))}function toggleLogout(){$("#logout").hasClass("chaptersVisible")?hideChapters():(hideChapters(),$("#logout").addClass("chaptersVisible"),$(".logoutIcon").addClass("logoutIconActive"))}function hideChapters(){$(".chapters").removeClass("chaptersVisible"),$(".chapterIcon").removeClass("chapterIconActive"),$(".eduIcon").removeClass("eduIconActive"),$(".competenceIcon").removeClass("competenceIconActive"),$(".logoutIcon").removeClass("logoutIconActive"),$(".helpIcon").removeClass("helpIconActive")}function getStudent(a){restClient.withHeader("Authorization",a).read("/api/V1/student").then(function(b){window.localStorage.setItem("student",JSON.stringify(b)),$("#vorname").html(b.forename),$("#nachname").html("<br>"+b.surname),$("#bday").html(b.birth),getAvatars(a),getSchool(a),getKlasse(a),selectAllCompetences()})}function getAvatars(newToken){restClient.withHeader("Authorization",newToken).read("/api/V1/avatar").then(function(avatars){var student=JSON.parse(window.localStorage.getItem("student")),studentAvatarId=student.avatarId,avatarActive='"'+avatars[studentAvatarId].avatarUrl+'"',avatarInactive='"'+avatars[studentAvatarId].avatarInactiveUrl+'"',avatarBig='"'+avatars[studentAvatarId].avatarBigUrl+'"';$("#headerStudent").attr("src",eval(avatarInactive)),$("#avatarBig").attr("src",eval(avatarBig))}).fail(function(){console.log("Failed")})}function getSchool(newToken){var schule=JSON.parse(window.localStorage.getItem("student")).school;$("#schulname").html(schule.name);var schulbildInactive='"'+schule.imageUrlInactive+'"',schulbildBig='"'+schule.imageUrlBig+'"',schuladresse=schule.address.split(", ");$("#strasse").html(schuladresse[0]),$("#ort").html(schuladresse[1]),$("#land").html(schule.country),$("#email").html(schule.email);var mailadresse='"mailto:'+schule.email+'"',telefonnummer='"tel:'+schule.telefon+'"';$("#email").attr("href",eval(mailadresse)),$("#telefon").html(schule.telefon),$("#telefon").attr("href",eval(telefonnummer)),$("#headerSchool").attr("src",eval(schulbildInactive)),$("#schulbild").attr("src",eval(schulbildBig))}function getKlasse(newToken){var klasse=JSON.parse(window.localStorage.getItem("student")).studyGroups,lehrer=JSON.parse(window.localStorage.getItem("student")).formteacher;$("#klasseKlasse").html(klasse.class),$("#lehrer").html(lehrer);var klassenbildBig='"'+klasse.imageUrlBig+'"',klassenbildInactive='"'+klasse.imageUrlInactive+'"';$("#klassenbildBig").attr("src",eval(klassenbildBig)),$("#headerKlasse").attr("src",eval(klassenbildInactive))}function getChapters(a){restClient.withHeader("Authorization",a).read("/api/V1/chapter").then(function(a){var b=0;for(i in a)b++,$("#chapterTable").append('<tr style="background-color: '+a[i].strongcolor+'; cursor:pointer; color: #fff;" id="ch'+b+'" onclick="selectChapters(this.id)"><td><p>'+a[i].name+"</p></td></tr>"),$("#competenceTable").append('<tr style="background-color: '+a[i].strongcolor+'; cursor:pointer; color: #fff;" id="co'+b+'" onclick="selectCompetences(this.id)"><td><p>'+a[i].name+"</p></td></tr>")}).fail(function(){console.log("Failed")})}function getEduplan(a){restClient.withHeader("Authorization",a).read("/api/V1/educationalPlan").then(function(a){for(i in a)$("#eduTable").append('<tr style="cursor:pointer;"><td><p>'+a[i].name+"</p></td></tr>")}).fail(function(){console.log("Failed")})}function logout(){window.localStorage.removeItem("token"),window.localStorage.removeItem("student"),window.location="login.php"}function getAvatarsAll(a){var b=-1,c=[];restClient.withHeader("Authorization",a).read("/api/V1/avatar").then(function(a){for(i in a){b++;var d=a[i].avatarBigUrl;c.push(d),$("#avatarsAll").append('<img src="'+d+'" id="'+b+'" onclick="changeMe(this.id)"></img>')}window.localStorage.setItem("allThemAvatars",JSON.stringify(c))})}function changeMe(avatarId){avatarsAll=JSON.parse(window.localStorage.getItem("allThemAvatars"));var url='"'+avatarsAll[avatarId]+'"';$("#avatarBig").attr("src",eval(url))}function backToHome(){window.location="index.php"}function changeProfilePicture(){var a,b=JSON.parse(window.localStorage.getItem("allThemAvatars"));for(var c in b)b[c]==$("#avatarBig").attr("src")&&(a=c);console.log($("#avatarBig").attr("src")),console.log(b[a]);var d=window.localStorage.getItem("token"),e="/api/V1/avatar/"+a;restClient.withHeader("Authorization",d).update(e).done(function(a){alert("Profilbild geändert!")}).fail(function(){alert("Das hat nicht funktioniert, bitte nochmal versuchen")})}function selectChapters(a){if(a.length>3)var b=a.charAt(2)+a.charAt(3);else var b=a.charAt(2);var c=window.localStorage.getItem("token");restClient.withHeader("Authorization",c).read("/api/V1/studentcompetence").then(function(a){$("#bubbleCanvas").html(""),hideChapters();for(var d in a)if(a[d].chapterId==b){var e,f;a[d].chapterId<10?(e="0"+a[d].chapterId,console.log(e)):(e=""+a[d].chapterId,console.log(e)),f=a[d].checked?"Done":"Undone",$("#bubbleCanvas").append('<div class="bubble"><p>'+a[d].studentText+'</p><img class="bubbleIcon" src="images/chapters/chapter'+e+"/competence"+f+'.png"></div>')}var g="images/chapters/chapter"+e+"/littleChapterFlag.png",h="images/chapters/chapter"+e+"/scrollUp.png",i="images/chapters/chapter"+e+"/scrollDown.png";$("#scrollUp").attr("src",h),$("#scrollDown").attr("src",i),$("#chapterFlag").attr("src",g);var j="/api/V1/chapter/"+b;restClient.withHeader("Authorization",c).read(j).then(function(a){console.log(a);var b=a.weakcolor;$("body").css("background-color",b)})})}function selectCompetences(a){if(a.length>3)var b=a.charAt(2)+a.charAt(3);else var b=a.charAt(2);var c=window.localStorage.getItem("token");restClient.withHeader("Authorization",c).read("/api/V1/studentcompetence").then(function(a){$("#bubbleCanvas").html(""),hideChapters();for(var d in a)if(a[d].checked&&a[d].chapterId==b){var e,f;a[d].chapterId<10?(e="0"+a[d].chapterId,console.log(e)):(e=""+a[d].chapterId,console.log(e)),f=a[d].checked?"Done":"Undone",$("#bubbleCanvas").append('<div class="bubble"><p>'+a[d].studentText+'</p><img class="bubbleIcon" src="images/chapters/chapter'+e+"/competence"+f+'.png"></div>')}var g="images/chapters/chapter"+e+"/littleChapterFlag.png",h="images/chapters/chapter"+e+"/scrollUp.png",i="images/chapters/chapter"+e+"/scrollDown.png";$("#scrollUp").attr("src",h),$("#scrollDown").attr("src",i),$("#chapterFlag").attr("src",g);var j="/api/V1/chapter/"+b;restClient.withHeader("Authorization",c).read(j).then(function(a){console.log(a);var b=a.weakcolor;$("body").css("background-color",b)})})}function selectAllCompetences(){var a=window.localStorage.getItem("token");restClient.withHeader("Authorization",a).read("/api/V1/studentcompetence").then(function(a){$("#bubbleCanvas").html(""),hideChapters();for(var b in a)if(a[b].checked){var c;c=a[b].chapterId<10?"0"+a[b].chapterId:""+a[b].chapterId,$("#bubbleCanvas").append('<div class="bubble"><p>'+a[b].studentText+'</p><img class="bubbleIcon" src="images/chapters/chapter'+c+'/competenceDone.png"></div>')}$("#scrollUp").attr("src","images/allCompetences/scrollUp.png"),$("#scrollDown").attr("src","images/allCompetences/scrollDown.png"),$("#chapterFlag").attr("src","images/allCompetences/kamehameha.png"),$("body").css("background-color","#E1F52C")})}$("#btn").on("click",function(){login()});var restClient=ê.createRestClient({host:"46.101.204.215:1337",useSSL:!1}),token,restClient=ê.createRestClient({host:"http://46.101.204.215:1337",useSSL:!1}),token=localStorage.getItem("token"),avatarStudent,avatarArray=[];